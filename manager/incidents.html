<!DOCTYPE html>
<!--
  ~ Copyright (c) 2018 Red Cross Vienna and contributors. All rights reserved.
  ~
  ~ This software may be modified and distributed under the terms of the MIT license. See the LICENSE file for details.
  -->

<html>
<head>
  <title>GeoBroker manager - incidents</title>
</head>
<body>
  <p>The main design goals for this module are simple code and less effort - data errors are <em>not</em> handled in general!</p>

  <p>Manage units <a href="index.html">here</a>.<p>
  <p>Manage POIs <a href="pois.html">here</a>.<p>
  <p>Edit POIs in Coceso JSON format <a href="json.html">here</a>.<p>
  <p>Print unit URLs <a href="urls.html">here</a>.<p>

  <h1>Incidents</h1>
  <form data-bind="submit: addIncident">
    <textarea
      placeholder="one incident type per line"
      data-bind="value: newIncidentType"
    ></textarea><button type="submit">Add</button>
  </form>
  <table>
    <thead><tr>
      <th>Id</th>
      <th>Type</th>
      <th>Info</th>
      <th>Priority</th>
      <th>Blue</th>
      <th>Latitude/Longitude</th>
      <th>Actions
        <a href="#" data-bind="click: postAll">Save all</a>
      </th>
    </tr></thead>
    <tbody data-bind="foreach: configuredIncidents"><tr>
      <td data-bind="text: id"></td>
      <td><input data-bind="value: type" /></td>
      <td><input data-bind="value: info" /></td>
      <td><input data-bind='checked: priority' type='checkbox' /></td>
      <td><input data-bind='checked: blue' type='checkbox' /></td>
      <td data-bind="with: location">
        <!-- TODO implement as map -->
        <input data-bind="value: latitude" />
        <input data-bind="value: longitude" />
      </td>
      <td>
        <a href="#" data-bind="click: post">Save</a>
        <a href="#" data-bind="click: $parent.removeIncident">Delete</a>
      </td>
    </tr></tbody>
  </table>

  <script src="libs/jquery/jquery-3.3.1.min.js"></script>
  <script src="libs/knockout/v3.4.2/knockout.js"></script>
  <script src="libs/knockout/v3.4.2/knockout.mapping-2.4.1.js"></script>

  <script src="config.js"></script>
  <script src="js/incidents.js"></script>
</body>
</html>
